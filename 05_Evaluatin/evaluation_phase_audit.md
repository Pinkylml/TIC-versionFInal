# Phase 5: Evaluation Phase Audit
**Notebook Analyzed:** 05_Evaluation/Evaluación (3).ipynb
**Audit Date:** January 26, 2026

## 1. Executive Summary
This phase focuses on the rigorous evaluation of the selected "Best Candidate" model from the Data Modeling phase (Phase 4). The notebook loads the refined XGBoost-AFT model (**Dataset A | S2_strat_event**) and performs a multi-faceted assessment covering global discrimination, time-dependent accuracy, calibration, and feature explainability.

**Conclusion:** The model demonstrates **moderate discriminative ability** (C-Index ~0.616) with **good global probabilistic precision** (IBS ≈ 0.151) and **reasonable calibration** within the observed range. It is well-suited for **probabilistic estimation within the proxy horizon (0.5-6 months)** and for deployment in an MVP context. The explainability analysis identifies **variables associated** with shorter or longer expected search times (according to SHAP), providing valuable inputs for prescriptive hypotheses without implying direct causality.

With metrics (C-index, IBS, AUC(t), Brier(t)), visual validation (KM vs $\bar{S}(t)$), and explainability (SHAP), the evaluation phase is **sufficient for the MVP and thesis**, under the defined institutional scope and proxy horizon.

---

## 2. Evaluation Methodology
The evaluation pipeline implements a robust survival analysis framework:

1.  **Metric Calculation:**
    *   **Concordance Index (C-Index):** Global ranking accuracy.
    *   **Integrated Brier Score (IBS):** Accuracy of probabilistic predictions over time.
    *   **Time-Dependent AUC:** Discriminative power at specific time horizons.
2.  **Calibration Analysis:**
    *   **Global fit / calibration diagnostic:** Comparison of Kaplan-Meier (observed, non-parametric/stepped) vs $\bar{S}(t)$ (average, parametric/continuous) on the same **proxy scale**.
    *   **Brier Score Curve:** Error decomposition across the time axis.
    *   *Note: The XGB-AFT model predicts $\mu \approx \log(T)$. The survival curves $S(t)$ are derived using a **Normal AFT distribution** (per tuned parameters) and its scale.*
3.  **Explainability (SHAP):**
    *   **Global Feature Importance:** Identifying top drivers of employability.
    *   **Directional Impact:** Identifying features associated with **shorter vs longer** expected time.
    *   *Possible extension: Individual explanations per profile.*

---

## 3. Performance Metrics
The final evaluation metrics for the best model (**XGB-AFT | Dataset A | S2_strat_event**) on the Test Set are:

| Metric | Value | Interpretation |
| :--- | :--- | :--- |
| **C-Index (Test)** | **0.616** | Indicates **moderate discrimination** in data with significant noise or heterogeneity. The model correctly orders **comparable pairs** 61.6% of the time. |
| **Integrated Brier Score (IBS)** | **0.151** | Lower IBS is better; this magnitude is consistent with a model useful for probabilistic prediction in this horizon (ideally compared against a baseline like KM or null model). |
| **Mean Cumulative AUC** | **0.640** | Average discriminative power across time horizons. The Time-Dependent AUC is higher in **early time horizons** (< 6 months proxy), indicating the model separates early risk better than late risk. |

---

## 4. Visual Validation Findings
The audit identified several critical visualization artifacts generated by the notebook:

### 4.1. Global Calibration (P1 & P2)
*   **Artifact:** `P1_KM_vs_Pred_step_A_S2_strat_event.png` (KM vs Predicted)
    *   **Finding:** The average predicted survival curve closely tracks the observed Kaplan-Meier curve (evaluated on the operational proxy time scale). This suggests a **reasonable global fit**; it does not prove the distributional assumption is perfect, but it is consistent with the data.
*   **Artifact:** `P2_EmpiricalSmoothCats_A_S2_strat_event.png` (Empirical by Bins)
    *   **Finding:** When binning predictions into categories (e.g., "< 6 months", "6-12 months"), the observed empirical curves align with the predicted bands. This shows **descriptive coherence** of the operational mapping, useful for interpretation rather than strict validation.
    *   > [!IMPORTANT]
    >   **Methodological Note:** This figure is descriptive by operational ranges (bins). If calculated only on hired students ($E=1$), it represents $P(T \le t | E=1)$ and is not equivalent to the population-level $1-S(t)$ which incorporates **right-censoring**.

### 4.2. Time-Dependent Error (P3 & P4)
*   **Artifact:** `AUC_curve_XGB_A_S2_strat_event.png`
    *   **Finding:** Discrimination (AUC) is highest at the start of the timeline and decreases slightly, stabilizing around 0.60.
*   **Artifact:** `Brier_curve_XGB_A_S2_strat_event.png`
    *   **Finding:** Brier(t) increases with time, reflecting growing uncertainty and the effect of right-censoring at longer horizons.

---

## 5. Explainability & Insights (SHAP)
The SHAP analysis provided valuable associations for the "Prescriptive" component of the thesis.

> [!NOTE]
> **Interpretation in AFT:**
> *   **SHAP > 0** increments $\mu \approx \log(T) \Rightarrow$ **longer expected time** (slower placement).
> *   **SHAP < 0** reduces $\mu \Rightarrow$ **shorter expected time** (faster placement).

### 5.1. Top "Accelerators" (Negative SHAP -> Faster Hiring)
Skills or features associated with reduced expected time to employment:
*   **Actionable:**
    1.  **Soft Skills (S1_Comunicacion_Esp):** Strong communication appears as a primary accelerator.
    2.  **English (S7_Ingles):** Proficiency is associated with shorter search times.
    3.  **Modern Tech (Deep Learning/AI):** Niche, high-demand technical skills.
*   **Structural:**
    4.  **Domain (Agroindustria):** Likely reflecting sector-specific dynamics in the region.

### 5.2. Top "Decelerators" (Positive SHAP -> Slower Hiring)
Features associated with longer job search durations in this specific dataset:
1.  **Generic/Saturated Stacks (React):** In this institutional dataset, the presence of 'react, revit' appears associated with higher $\mu$. This may reflect **profile mixing confusion**, **high competition**, or **sampling correlations**; it does not imply React "lacks demand" in the market.
2.  **Foundational Skills (Data Structures):** May correlate with purely academic profiles lacking applied commercial experience.

> [!TIP]
> Features like career tracks (`carrera_clean_*`) should be interpreted as **structural controls** rather than actionable levers for students.

---

## 6. Recommendations
1.  **Scope Declaration:** Explicitly report that results apply to the **institutional case (EPN)** and the **proxy horizon (0.5-6 months)**.
2.  **Metric Emphasis:** Report the **IBS (0.151)** as the primary indicator of reliability for probability feedback, acknowledging C-Index limitations.
3.  **Figure Presentation:** Use **Figure 1 (KM vs $\bar{S}(t)$)** as the main statistical validation, and **Figure 2 (Bins)** for business/operational interpretation.
4.  **Deployment:** The model is ready for MVP integration (Streamlit dashboard) given its stable calibration and explainable outputs.
    *   MVP outputs: predicted employability curve $1-\bar S(t)$ within 0.5--6 proxy months + SHAP-based actionable guidance.
